exports.id=650,exports.ids=[650],exports.modules={5028:(e,s,r)=>{Promise.resolve().then(r.bind(r,4332))},2671:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},4332:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var t=r(5344),a=r(3729),i=r(165),n=r(7539);function o({children:e}){let[s]=(0,a.useState)(()=>new i.QueryClient);return t.jsx(i.QueryClientProvider,{client:s,children:t.jsx(n.p,{children:e})})}},5578:(e,s,r)=>{"use strict";r.d(s,{Z:()=>o});var t=r(5344),a=r(3729),i=r(1453),n=r(3511);function o({isOpen:e,enabled:s,onClose:r,onEnableChange:o}){let l=(0,i.M)(e=>e.aiSettings),c=(0,i.M)(e=>e.updateAISettings),[d,m]=(0,a.useState)(l.lexileScore),[h,g]=(0,a.useState)(l.priorityWords.join(", ")),[p,u]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=()=>{u(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e)?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:`bg-white dark:bg-dark-100 ${p?"w-full h-full":"rounded-lg max-w-md mx-4"} shadow-xl`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-dark-300",children:[t.jsx("h3",{className:"text-lg font-medium",children:"AI 转写设置"}),t.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:t.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:`${p?"p-4 h-[calc(100vh-120px)] overflow-y-auto":"p-4"}`,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"font-medium text-gray-700 dark:text-gray-300",children:"启用 AI 转写"}),(0,t.jsxs)("div",{className:"relative inline-block w-10 align-middle select-none",children:[t.jsx("input",{type:"checkbox",checked:s,onChange:e=>o(e.target.checked),className:"sr-only",id:"ai-toggle"}),t.jsx("label",{htmlFor:"ai-toggle",className:`block h-6 overflow-hidden rounded-full cursor-pointer transition-colors duration-200 ease-in-out ${s?"bg-primary-500":"bg-gray-300 dark:bg-dark-300"}`,children:t.jsx("span",{className:`block h-6 w-6 rounded-full bg-white shadow transform transition-transform duration-200 ease-in-out ${s?"translate-x-4":"translate-x-0"}`})})]})]}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"启用后，系统将使用 AI 技术自动转写文本，使其更易于理解"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"蓝思值"}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("button",{className:"p-2 bg-gray-100 dark:bg-dark-200 rounded-l-md hover:bg-gray-200 dark:hover:bg-dark-300 disabled:opacity-50",onClick:()=>m(Math.max(500,d-50)),disabled:!s,children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),t.jsx("input",{type:"range",min:"500",max:"1500",step:"50",value:d,onChange:e=>m(parseInt(e.target.value,10)),className:"slider flex-1 mx-2",disabled:!s}),t.jsx("button",{className:"p-2 bg-gray-100 dark:bg-dark-200 rounded-r-md hover:bg-gray-200 dark:hover:bg-dark-300 disabled:opacity-50",onClick:()=>m(Math.min(1500,d+50)),disabled:!s,children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-500 mt-1",children:[t.jsx("span",{children:"简单"}),t.jsx("span",{children:d}),t.jsx("span",{children:"复杂"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"优先词汇"}),t.jsx("textarea",{className:"w-full px-3 py-2 border rounded-md dark:bg-dark-200 dark:border-dark-300 disabled:opacity-50",rows:3,placeholder:"输入优先使用的词汇，用逗号分隔",value:h,onChange:e=>g(e.target.value),disabled:!s}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"AI 转写时会优先使用这些词汇"})]}),(0,t.jsxs)("div",{className:"pt-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{children:"已消耗积分"}),t.jsx("span",{children:l.credits})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[t.jsx("span",{children:"平均每章消耗"}),t.jsx("span",{children:"5 积分"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 p-4 border-t dark:border-dark-300",children:[t.jsx(n.Z,{variant:"ghost",onClick:r,children:"取消"}),t.jsx(n.Z,{variant:"primary",onClick:()=>{c({enabled:s,lexileScore:d,priorityWords:h.split(",").map(e=>e.trim()).filter(Boolean)}),r()},children:"保存"})]})]})}):null}},3511:(e,s,r)=>{"use strict";r.d(s,{Z:()=>o});var t=r(5344),a=r(3729),i=r(9377);let n=(0,a.forwardRef)(({className:e,variant:s="primary",size:r="md",isLoading:a=!1,disabled:n,children:o,...l},c)=>(0,t.jsxs)("button",{ref:c,className:(0,i.m6)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 disabled:pointer-events-none disabled:opacity-50",{primary:"bg-primary-500 text-white hover:bg-primary-600",secondary:"bg-primary-100 text-primary-900 hover:bg-primary-200 dark:bg-primary-900/10 dark:text-primary-100 dark:hover:bg-primary-900/20",ghost:"hover:bg-primary-100 hover:text-primary-900 dark:hover:bg-primary-900/10 dark:hover:text-primary-100"}[s],{sm:"h-8 px-3 text-sm",md:"h-10 px-4",lg:"h-12 px-6 text-lg"}[r],e),disabled:a||n,...l,children:[a?(0,t.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,o]}));n.displayName="Button";let o=n},8117:(e,s,r)=>{"use strict";r.d(s,{F3:()=>i,MC:()=>d,QI:()=>m,a8:()=>c,lc:()=>n,p0:()=>o,xQ:()=>l,yt:()=>a});let t=r(7665).Z.create({baseURL:"http://175.178.190.253:8081/api",timeout:1e4});async function a(e=0,s=10,r="bookName",a="asc"){let{data:i}=await t.get("/books",{params:{page:e,size:s,sortBy:r,direction:a}});return i}async function i(e){let{data:s}=await t.get(`/books/${e}`);return s}async function n(e,s=0,r=100,a="chapterName",i="asc"){let{data:n}=await t.get(`/chapters/book/${e}`,{params:{page:s,size:r,sortBy:a,direction:i}});return n}async function o(e,s=0,r=100,a="chapterOrder",i="asc"){let{data:n}=await t.get(`/chapters/book/${e}/with-lexile`,{params:{page:s,size:r,sortBy:a,direction:i}});return n}async function l(e,s=!1,r,a){console.log("=== API 调用 fetchChapter 开始 ==="),console.log("参数:",{chapterId:e,startAI:s,lexileNo:r,priorityVocabulary:a});try{let{data:i}=await t.get(`/chapters/${e}`,{params:{startAI:s,...r&&{lexileNo:r},...a&&{priorityVocabulary:a},_t:Date.now()}});return console.log("=== API 调用 fetchChapter 成功 ==="),console.log("返回数据:",{chapterId:i.chapterId,chapterName:i.chapterName}),i}catch(e){throw console.error("=== API 调用 fetchChapter 失败 ===",e),e}}async function c(e,s,r,a){if(!e)return{success:!1,message:"书籍ID不能为空"};console.log(`开始批量转写书籍 ${e} 的章节 ${s} 到 ${r}，蓝思值: ${a}`);try{let{data:i}=await t.post(`/books/${e}/batch-transcribe`,null,{params:{startChapter:s,endChapter:r,lexileScore:a}});if(console.log("批量转写响应:",i),!i.success&&"该书籍没有章节"===i.message)return{success:!1,message:"该书籍没有章节。请先导入章节内容，或者检查书籍ID是否正确。"};return i}catch(e){return console.error("批量转写失败:",e.response?.data||e.message),{success:!1,message:e.response?.data?.message||"批量转写请求失败，请稍后再试"}}}async function d(e){console.log(`删除书籍 ${e}`);try{let{data:s}=await t.delete(`/books/${e}`);return s}catch(e){return console.error("删除书籍失败:",e),{success:!1,message:"删除书籍请求失败"}}}async function m(e){try{console.log("开始导入书籍:",e.bookName,"章节数:",e.chapters.length);let s={bookName:e.bookName,chapters:e.chapters.map(e=>({chapterName:e.chapterName,content:e.content,order:e.order}))},{data:r}=await t.post("/books/import",s);return console.log("导入书籍成功:",r),{success:!0===r.success,message:r.message||"书籍导入成功",bookId:r.bookId}}catch(e){return console.error("导入书籍失败:",e.response?.data||e.message),{success:!1,message:e.response?.data?.message||"导入书籍失败，请稍后再试"}}}t.interceptors.response.use(e=>e,e=>{if(e.response){let{status:s,data:r}=e.response;console.error(`API Error (${s}):`,r)}else e.request?console.error("Request Error:",e.request):console.error("Error:",e.message);return Promise.reject(e)})},1453:(e,s,r)=>{"use strict";r.d(s,{M:()=>i});var t=r(3158),a=r(7023);let i=(0,t.Ue)()((0,a.tJ)(e=>({settings:{fontSize:16,fontFamily:"system-ui",lineHeight:1.5,letterSpacing:0,theme:"light"},updateSettings:s=>e(e=>({settings:{...e.settings,...s}})),aiSettings:{enabled:!1,lexileScore:1e3,priorityWords:[],credits:100},updateAISettings:s=>e(e=>({aiSettings:{...e.aiSettings,...s}})),readingProgress:{},updateReadingProgress:s=>e(e=>({readingProgress:{...e.readingProgress,[s.bookId]:s}})),isToolbarVisible:!0,setToolbarVisible:s=>e({isToolbarVisible:s}),isSettingsDialogVisible:!1,setSettingsDialogVisible:s=>e({isSettingsDialogVisible:s}),isChapterListVisible:!1,setChapterListVisible:s=>e({isChapterListVisible:s})}),{name:"reader-store",version:1}))},8062:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m,metadata:()=>d});var t=r(5036),a=r(265),i=r.n(a);r(7272);let n=(0,r(6843).createProxy)(String.raw`E:\project\reading\reading-app\app\providers.tsx`),{__esModule:o,$$typeof:l}=n,c=n.default,d={title:"ABHISECA - 外语阅读器",description:"外语阅读器"};function m({children:e}){return t.jsx("html",{lang:"zh",children:t.jsx("body",{className:i().className,children:t.jsx(c,{children:e})})})}},7272:()=>{}};